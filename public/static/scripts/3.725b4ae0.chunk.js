(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{2:function(e,t){},"5bs+":function(e,t,a){e.exports={stringItem:"stringItem___1FBwx",header:"header___UlJIZ",editorContainer:"editorContainer___1kKNl",toolbar:"toolbar___2VIfs",loading:"loading___2z7I5",dialogEditorTTL:"dialogEditorTTL___3OGlb",editTable:"editTable___2UwlS",active:"active___23HrF",editorKey:"editorKey___19bS0",editorValue:"editorValue___1CBq4",operate:"operate___3SVV2"}},HOj0:function(e,t,a){"use strict";var n=a("XDt2"),l=a("FSq6"),r=a("Fghh"),i=a("q1tI"),o=a.n(i),d=a("Yvqa"),s=Object(l["a"])("locale");class c{constructor(){Object.defineProperty(this,s,{writable:!0,value:void 0}),Object(n["a"])(this,s)[s]=this.getLocale()}get(e,t){var a,l=Object(n["a"])(this,s)[s],i=(null===(a=r["d"][l])||void 0===a?void 0:a.messages[e])||e;return t?i.format(t):i}getHTML(e,t){var a,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"span",l=this.getLocale(),i=(null===(a=r["d"][l])||void 0===a?void 0:a.messages[e])||e,d={dangerouslySetInnerHTML:{__html:t?i.format(t):i}};t&&t["className"]&&(d.className=t.className);var s=o.a.createElement(n,d),c=function(){return s};return Object.assign({defaultMessage:c,d:c},s)}isLocale(e){return this.getLocale()===e}setLocale(e){localStorage.setItem("umi_locale",Object(n["a"])(this,s)[s]=e)}getLocale(){if(Object(n["a"])(this,s)[s])return Object(n["a"])(this,s)[s];var e=localStorage.getItem("umi_locale")||navigator.language||navigator.languages[0];return r["d"][e]||(e=d["b"].DEFAULT_LANGUAGE),Object(n["a"])(this,s)[s]=e}getLocaleAll(){var e=[];return Object.values(r["d"]).map((t=>{var a=t.locale,n=t.messages;e.push({locale:a,name:n["locale.name"]})})),e}}var u=new c,m=u.get.bind(u),v=u.getHTML.bind(u),p=u.isLocale.bind(u),h=u.getLocale.bind(u),y=u.setLocale.bind(u),g=u.getLocaleAll.bind(u);t["a"]={get:m,getHTML:v,isLocale:p,setLocale:y,getLocale:h,getLocaleAll:g}},SLhE:function(e,t,a){"use strict";a.d(t,"a",(function(){return d})),a.d(t,"b",(function(){return u})),a.d(t,"c",(function(){return m}));var n=a("sxGJ"),l=a.n(n),r=a("Yvqa"),i=a("TiCD"),o=a.n(i);l.a.prototype.listenClick=function(e){var t=this;t.listener=o()(e,"click",(e=>{e.stopPropagation(),t.onClick(e)}))};var d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Copied!",a=new l.a(e);return a.on("success",(function(e){toast(t),e.clearSelection()})),a.on("error",(e=>alert(e.text))),a},s=function(){var e=new Date,t=e.getTimezoneOffset()/-60;return{offsetHour:t,offsetSecond:60*t*60,timeZone:e.getTimezoneOffset(),timeZoneName:Intl.DateTimeFormat().resolvedOptions().timeZone,Id:e.toTimeString().split(" ")[1]}},c=function(e){var t=getComputedStyle(e),a=parseInt(t.maxHeight);e.style.height="auto",e.scrollTop=0,e.style.height=Math.min(e.scrollHeight,a)+"px"};function u(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text/plain",n=new Blob([e],{type:a}),l=URL.createObjectURL(n),r=document.createElement("a");r.href=l,r.download=t,r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(l)}function m(e,t,a){var n,l,i=!1,o=document.getElementById(e),d=document.getElementById(t),s=getComputedStyle(d),c=parseInt(s.minWidth),u=parseInt(s.maxWidth)/100*document.body.offsetWidth;o.addEventListener("mousedown",(function(e){i=!0,n=e.clientX-o.getBoundingClientRect().left,l=parseInt(s.width)||d.offsetWidth,document.body.style.cursor="ew-resize",o.classList.add(a)})),document.addEventListener("mousemove",(function(e){if(i){var t=e.clientX-n,a=t-l+l;a>=u?a=t=u:a<=c&&(a=t=c),d.style.width=a+"px",r["b"].setSidebarWidth(a+"px")}})),document.addEventListener("mouseup",(function(e){e.preventDefault(),e.stopPropagation(),i&&document.body.removeAttribute("style"),i=!1,o.classList.remove(a)}))}uuid},Yvqa:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n="sys.sidebar-width",l="sys.settings",r={DEFAULT_LANGUAGE:"en-US",DEFAULT_FONT_SIZE:"14px",FONT_SIZE:[12,13,14,15,16,18,20],DEFAULT_FONT_FAMILY:"PingFang SC",FONT_FAMILY:["PingFang SC","Arial","Times New Roman","Verdana","Helvetica","Roboto","sans-serif"],getSidebarWidth(){return localStorage.getItem(n)||""},setSidebarWidth(e){localStorage.setItem(n,e)},getSettings(){return JSON.parse(localStorage.getItem(l)||"{}")},setSettings(e){localStorage.setItem(l,JSON.stringify(e))}},i={name:"",host:"",port:6379,db:[],advancedSettings:{defaultFilter:"*",namespaceSeparator:":",scanUpperLimit:1e3}};t["b"]=r},"aD/6":function(e,t,a){e.exports={keyWrap:"keyWrap___30Y9Y"}},oNJW:function(e,t,a){"use strict";var n=a("q1tI"),l=a("qAKk");t["a"]=()=>{var e=Object(n["useContext"])(l["a"]);return e}},oh6M:function(e,t,a){"use strict";var n=a("q1tI"),l=a.n(n),r=a("TSYQ"),i=a.n(r);t["a"]=e=>{var t=e.type,a=e.className,n=e.style;return l.a.createElement("svg",{className:i()("icon",a),role:t,style:n},l.a.createElement("use",{xlinkHref:"#".concat(t)}))}},qAKk:function(e,t,a){"use strict";a.d(t,"b",(function(){return i}));var n=a("q1tI"),l=a("HOj0"),r=a("Yvqa"),i=Object.assign({lang:l["a"].getLocale(),theme:localTheme.theme,uiFontSize:r["b"].DEFAULT_FONT_SIZE,uiFontFamily:r["b"].DEFAULT_FONT_FAMILY,editorFontSize:r["b"].DEFAULT_FONT_SIZE,editorFontFamily:r["b"].DEFAULT_FONT_FAMILY,confirmSameNameOverlap:!0,maximumNumberPerPage:1e3,scanUpperLimit:1e3},r["b"].getSettings()),o=Object(n["createContext"])(i);t["a"]=o},qjBG:function(e,t,a){"use strict";var n=a("vDqi"),l=a.n(n),r=l.a.create({baseURL:"/api/redis/",timeout:6e4,withCredentials:!1});class i{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this.id=null,this.data=null,this.message="OK",this.code=0,e){var t=this;for(var a in e)a&&(t[a]=e[a])}}isSuccess(){return"OK"===this.message&&0===this.code}static ok(){return new i}}r.interceptors.request.use((e=>e)),r.interceptors.response.use((e=>{var t=e.request.responseType;if("blob"===t)return e;var a=new i(e.data);return 200!=e.status&&(a.code=e.status),a}),(e=>Promise.reject(e))),EventSource.prototype.listeners={},EventSource.prototype.on=function(e,t){var a=e=>{var a=e.data;a&&isJSON(a)?t(JSON.parse(a)):t(a)};return this.listeners[e]=a,this.addEventListener(e,a,!1),this},EventSource.prototype.off=function(e){var t=this.listeners[e];return t&&this.removeEventListener(e,t,!1),this};var o={Axios:l.a,baseURL:r.defaults.baseURL,get(e,t){return r.get(e,t)},delete(e,t){return r.delete(e,t)},head(e,t){return r.head(e,t)},options(e,t){return r.options(e,t)},post(e,t,a){return r.post(e,t,a)},put(e,t,a){return r.put(e,t,a)},patch(e,t,a){return r.patch(e,t,a)},upload(e,t,a){for(var n=new FormData,l=0;l<t.length;l++){var i=t.item(l);i&&n.append("file"+(l+1),i,i.name)}return a=a||{headers:{}},a.headers||(a.headers={}),a.headers["Content-Type"]="multipart/form-data",r.post(e,n,a)},eventSource(e,t){e.startsWith("http")||(e=(r.defaults.baseURL||"")+e);var a=new EventSource(e);return a.addEventListener("close",(e=>a.close()),!1),a.onerror=function(e){a.close()},t&&(a.onmessage=e=>t(JSON.parse(e.data))),a}},d=o,s=a("Yvqa"),c={serverList(){return d.get("list")},serverSave(e){return d.post("save",e)},serverTest(e){return d.post("test",e)},serverDel(e){return d.get("delete/"+e)},db(e){return e?d.eventSource(e):null},keyspace(e){var t=window,a=t.selectServerId,n=t.selectDatabase,l=[a,"/",n];return e&&l.push("?filter=",e),d.eventSource(l.join(""))},values(e,t){var a=window,n=a.selectServerId,l=a.selectDatabase;return d.eventSource([n,l,"get",e,t].join("/"))},sendCmd(e,t,a){var n=window,l=n.selectServerId,r=n.selectDatabase,i=[l,r,e];return t&&i.push(t),d.post(i.join("/"),a).then((e=>(505==e.code||e.isSuccess()||toast(e.message),e)))},type(e){return this.sendCmd("type",null,{key:e})},expire(e,t){return this.sendCmd("expire",null,{key:e,value:t})},delete(e,t){return this.sendCmd("delete",null,{key:e,isGroup:t})},rename(e,t){var a={force:0,oldKey:e,key:t},n=s["b"].getSettings();return 0==(null===n||void 0===n?void 0:n.confirmSameNameOverlap)&&(a.force=1),this.sendCmd("rename",null,a).then((e=>505==e.code&&confirm("The key name already exists, do you want to overwrite it?")?(a.force=1,this.sendCmd("rename",null,a)):e))},string:{set(e,t){return c.sendCmd("set","string",{key:e,value:t})}},hash:{set(e,t,a,n){return n?this.rename(e,n,t,a):c.sendCmd("set","hash",{key:e,field:t,value:a,oldField:n})},del(e,t){return c.sendCmd("del","hash",{key:e,field:t})},rename(e,t,a,n){var l={key:e,oldField:t,newField:a,value:n,force:0},r=s["b"].getSettings();return 0==(null===r||void 0===r?void 0:r.confirmSameNameOverlap)&&(l.force=1),c.sendCmd("rename","hash",l).then((e=>505==e.code&&confirm("The key name already exists, do you want to overwrite it?")?(l.force=1,c.sendCmd("rename","hash",l)):e))}},zset:{add(e,t,a){return c.sendCmd("add","zset",{key:e,value:t,score:a})},set(e,t,a,n){return n?this.rename(e,n,t,a):c.sendCmd("set","zset",{key:e,value:t,score:a})},del(e,t){return c.sendCmd("del","zset",{key:e,value:t})},rename(e,t,a,n){return c.sendCmd("rename","zset",{key:e,oldValue:t,newValue:a,score:n})}},list:{lPush(e,t){return c.sendCmd("lpush","list",{key:e,value:t})},rPush(e,t){return c.sendCmd("rpush","list",{key:e,value:t})},set(e,t,a){return c.sendCmd("set","list",{key:e,value:t,index:a})},del(e,t){return c.sendCmd("del","list",{key:e,index:t})}},sset:{add(e,t){return c.sendCmd("add","set",{key:e,value:t})},set(e,t,a){return c.sendCmd("set","set",{key:e,value:t,oldValue:a})},del(e,t){return c.sendCmd("del","set",{key:e,value:t})}}};t["a"]=c},r1t0:function(e,t,a){"use strict";var n=a("TSYQ"),l=a.n(n),r=a("q1tI"),i=a.n(r),o=a("i8i4"),d=a.n(o),s=a("oh6M"),c=e=>{var t=e=>{var t=e.target,n=t.id,l=t.classList;e&&n&&l.contains("dialog-layout")&&a(e)},a=t=>{if(e.noScroll&&document.querySelectorAll("html,body").forEach((e=>e.removeAttribute("aria-scroll"))),e.onClose)e.onClose(t);else{var a=t.currentTarget;if("DIV"!==a.tagName){var n=a.parentNode,l=5;while(l>0){if(n.classList.contains("dialog-layout")){n.hidden=!0;break}n=n.parentNode,++l}}else a.hidden=!0}},n={className:"dialog-layout not-select",onClick:a=>e.cancelable&&t(a),hidden:!e.visible,style:{}};e.id&&(n.id=e.id),e.backgroundColor&&(n.style.backgroundColor=e.backgroundColor),e.noScroll&&e.visible?document.body.setAttribute("aria-scroll","true"):document.body.removeAttribute("aria-scroll");var r=i.a.createElement("div",n,i.a.createElement("div",{className:l()("dialog-wrap",e.className)},e.title?i.a.createElement("div",{className:"flex-row head"},i.a.createElement("h3",null,e.title),!e.nonClose&&i.a.createElement("a",{className:"close",onClick:e=>a(e),hidden:closed},i.a.createElement(s["a"],{type:"icon-close"}))):e.nonClose?null:i.a.createElement("a",{className:"close tr",onClick:e=>a(e),hidden:closed},i.a.createElement(s["a"],{type:"icon-close"})),e.children));return d.a.createPortal(r,document.body)};t["a"]=c},"v+Jq":function(e,t,a){"use strict";a.r(t);var n=a("k1fw"),l=a("tJVT"),r=a("aD/6"),i=a.n(r),o=a("q1tI"),d=a.n(o),s=a("qjBG"),c=a("Ty5D"),u=a("5bs+"),m=a.n(u),v=a("oh6M"),p=a("TSYQ"),h=a.n(p),y=a("HOj0"),g=a("NFKh"),b=a.n(g),f="0123456789987654",E={md5(e){return b.a.MD5(e).toString().toLocaleUpperCase()},encrypt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f;"string"!==typeof e&&(e=JSON.stringify(e));var a="string"===typeof t?b.a.enc.Utf8.parse(t):t;return b.a.AES.encrypt(e,a,{mode:b.a.mode.ECB,padding:b.a.pad.Pkcs7}).toString()},decrypt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f,a="string"===typeof t?b.a.enc.Utf8.parse(t):t;return b.a.AES.decrypt(e,a,{mode:b.a.mode.ECB,padding:b.a.pad.Pkcs7}).toString(b.a.enc.Utf8)},encodeBase64(e){var t="string"===typeof e?e:JSON.stringify(e),a=b.a.enc.Utf8.parse(t);return b.a.enc.Base64.stringify(a)},decodeBase64(e){return b.a.enc.Base64.parse(e).toString(b.a.enc.Utf8)},encodeHex(e){var t="string"===typeof e?e:JSON.stringify(e),a=b.a.enc.Utf8.parse(t);return b.a.enc.Hex.stringify(a)},decodeHex(e){return e.startsWith("0x")&&(e=e.substring(2)),b.a.enc.Hex.parse(e).toString(b.a.enc.Utf8)},binary(e){return b.a.enc.Utf8.stringify(e)}},S=a("SLhE"),N=a("r1t0"),O=e=>d.a.createElement("div",{className:h()("input-button",e.className)},d.a.createElement("input",{type:"text",name:e.name,autoCapitalize:"off",onInput:t=>{e.onChange&&e.onChange(t.currentTarget.value)},placeholder:e.placeholder,defaultValue:e.defaultValue}),d.a.createElement("button",{type:"button",onClick:t=>e.onClick&&e.onClick(t.currentTarget.previousElementSibling.value,t.currentTarget)},e.icon&&d.a.createElement(v["a"],{type:e.icon}),e.text||"")),k=O,I=0,C=e=>{var t;return d.a.createElement("table",null,d.a.createElement("colgroup",null,d.a.createElement("col",{style:{minWidth:"100px",width:"100px"}}),d.a.createElement("col",{style:{width:"40%"}}),d.a.createElement("col",null)),d.a.createElement("thead",null,d.a.createElement("tr",null,d.a.createElement("th",null,"#"),d.a.createElement("th",null,"Key"),d.a.createElement("th",null,"Value"))),d.a.createElement("tbody",null,null===(t=e.data.children)||void 0===t?void 0:t.map(((t,a)=>d.a.createElement("tr",{key:t.field,onClick:n=>A(e,t,a,n),className:a==e.data.itemIndex?m.a.active:""},d.a.createElement("td",null,++I),d.a.createElement("td",null,t.field),d.a.createElement("td",null,d.a.createElement("div",null,t.value)))))))},x=e=>{var t;return d.a.createElement("table",null,d.a.createElement("colgroup",null,d.a.createElement("col",{style:{minWidth:"100px",width:"100px"}}),d.a.createElement("col",{style:{width:"40%"}}),d.a.createElement("col",null)),d.a.createElement("thead",null,d.a.createElement("tr",null,d.a.createElement("th",null,"#"),d.a.createElement("th",null,"Value"),d.a.createElement("th",null,"Score"))),d.a.createElement("tbody",null,null===(t=e.data.children)||void 0===t?void 0:t.map(((t,a)=>d.a.createElement("tr",{key:t.value,onClick:n=>A(e,t,a,n),className:a==e.data.itemIndex?m.a.active:""},d.a.createElement("td",null,++I),d.a.createElement("td",null,t.value),d.a.createElement("td",null,t.score))))))},T=e=>{var t;return d.a.createElement("table",null,d.a.createElement("colgroup",null,d.a.createElement("col",{style:{minWidth:"100px",width:"100px"}}),d.a.createElement("col",null)),d.a.createElement("thead",null,d.a.createElement("tr",null,d.a.createElement("th",null,"#"),d.a.createElement("th",null,"Value"))),d.a.createElement("tbody",null,null===(t=e.data.children)||void 0===t?void 0:t.map(((t,a)=>d.a.createElement("tr",{key:I,onClick:n=>A(e,t,a,n),className:a==e.data.itemIndex?m.a.active:""},d.a.createElement("td",null,++I),d.a.createElement("td",null,d.a.createElement("div",null,t)))))))},w=["Plain Text","JSON","HEX","Binary","Base64 To Text","Base64 To JSON"],L=(e,t)=>{var a=e.parentNode,n=a.nextElementSibling,l=e.value;try{"0"===l&&(n.value=isStr(t)?t:JSON.stringify(t)),"1"===l&&(n.value=JSON.stringify(isObject(t)?t:JSON.parse(t),void 0,4)),"2"===l&&(n.value=E.decodeHex(t)),"3"===l&&(n.value=E.binary(t)),"4"===l&&(n.value=E.decodeHex(t)),"5"===l&&(n.value=JSON.stringify(E.decodeHex(t),void 0,4))}catch(e){e&&toast(e.message)}},_=(e,t)=>{if(confirm(y["a"].get("editor.save.key.confirm"))){var a=t.previousElementSibling,n=a.defaultValue||a.value;n!=a.value&&e.handleRenameSave&&e.handleRenameSave(n,a.value,t)}},j=(e,t)=>{confirm(y["a"].get("editor.delete.tip.confirm"))&&e.handleDelete&&e.handleDelete(e.data.full||e.data.name,t)},F=(e,t)=>{confirm(y["a"].get("editor.delete-row.tip.confirm"))&&e.handleDeleteItem&&e.handleDeleteItem(t)},J=null,A=(e,t,a,n)=>{var l,r=n.currentTarget,i=r.classList.contains(m.a.active);r.classList.add(m.a.active),null===(l=J)||void 0===l||l.classList.remove(m.a.active),J=r,e.handleSelectedItem&&(i?e.handleSelectedItem(void 0,void 0):e.handleSelectedItem(t,a))},D=(e,t)=>{var a,n=null===(a=e.parentElement)||void 0===a?void 0:a.parentElement,l=n.nextElementSibling,r=l.value,i=r.startsWith("{")||r.startsWith("["),o=t.name+(i?".json":".txt");Object(S["b"])(r,o,i?"application/json":"text/plain")},U=(e,t)=>{var a,n=null===(a=t.parentElement.parentElement)||void 0===a?void 0:a.nextElementSibling;e.handleSaveValue&&e.handleSaveValue(n.value,t)},z=(e,t)=>{var a=t.parentNode.parentNode.parentNode.parentNode,n=null===a||void 0===a?void 0:a.querySelector("#editor-key"),l=null===a||void 0===a?void 0:a.querySelector("#editor-value");e.handleSaveItem&&e.handleSaveItem(n.value,l.value,t)},V=e=>{var t=document.getElementById("setting-key-ttl");null===t||void 0===t||t.removeAttribute("hidden")},q=(e,t,a)=>{var n,l,r=document.getElementById("setting-key-ttl");if((null===(n=e.data)||void 0===n||null===(l=n.ttl)||void 0===l?void 0:l.toString())!=t){var i=[1,6e3,36e5],o=null===r||void 0===r?void 0:r.querySelector("#setting-key-ttl-unit"),d=Math.floor(parseFloat(t)*i[(null===o||void 0===o?void 0:o.selectedIndex)||0]);e.handleSaveTtl&&e.handleSaveTtl(d,a),null===r||void 0===r||r.setAttribute("hidden","true")}else null===r||void 0===r||r.setAttribute("hidden","true")},H=e=>isObject(e)||isJSON(e)?1:0,B=e=>{var t,a;I=0;var n=e.data,l=H(n.content),r=isObject(n.content)?JSON.stringify(n.content,void 0,4):n.content;return d.a.createElement("div",{className:m.a.stringItem},d.a.createElement("div",{className:m.a.header},d.a.createElement("span",{className:m.a.loading,hidden:"start"!=e.state},d.a.createElement(v["a"],{type:"icon-loading"})),d.a.createElement("label",null,n.type),d.a.createElement(k,{icon:"icon-save",defaultValue:n.full,key:n.full,name:"key-name",onClick:(t,a)=>_(e,a)}),d.a.createElement("button",{id:"info_ttl",type:"button",onClick:e=>V(e.currentTarget)},d.a.createElement(v["a"],{type:"icon-time"}),"TTL: ",d.a.createElement("i",null,n.ttl)),d.a.createElement("button",{type:"button",onClick:t=>j(e,t.currentTarget)},d.a.createElement(v["a"],{type:"icon-delete"}),y["a"].get("editor.toolbar.button.delete")),d.a.createElement("button",{type:"button",onClick:t=>e.handleReloadValue&&e.handleReloadValue(t.currentTarget)},d.a.createElement(v["a"],{type:"icon-refresh"}),y["a"].get("editor.toolbar.button.reload"))),d.a.createElement("div",{className:m.a.editorContainer},d.a.createElement("div",{role:n.type,"aria-hidden":"string"==n.type,className:h()(m.a.editTable,"scrollbar y")},"hash"===n.type&&C(e),"zset"===n.type&&x(e),"list"===n.type&&T(e),"set"===n.type&&T(e)),d.a.createElement("div",{role:n.type,"aria-hidden":"string"==n.type||"list"==n.type||"set"==n.type,className:m.a.editorKey},d.a.createElement("div",{className:m.a.toolbar},d.a.createElement("dl",null,d.a.createElement("dt",null,y["a"].get("editor.toolbar.length.title"),":"),d.a.createElement("dd",null,(null===(t=n.children)||void 0===t?void 0:t.length)||0," ",y["a"].get("editor.toolbar.length.unit"))),d.a.createElement("p",null),d.a.createElement("div",{className:m.a.operate},d.a.createElement("button",{type:"button",className:"clipboard-copy tooltipped tooltipped-n","aria-label":y["a"].get("editor.toolbar.button.copy"),"data-clipboard-action":"copy","data-clipboard-target":"#editor-key"},d.a.createElement(v["a"],{type:"icon-copy"})),d.a.createElement("button",{type:"button",className:"tooltipped tooltipped-n","aria-label":y["a"].get("editor.toolbar.button.delete-row"),onClick:t=>F(e,t.currentTarget)},d.a.createElement(v["a"],{type:"icon-delete"})),d.a.createElement("button",{type:"button",className:"tooltipped tooltipped-n","aria-label":y["a"].get("editor.toolbar.button.save"),onClick:t=>z(e,t.currentTarget)},d.a.createElement(v["a"],{type:"icon-save"})))),d.a.createElement("textarea",{key:n.field+"_"+n.full,id:"editor-key",name:"editor-key",defaultValue:n.field})),d.a.createElement("div",{role:n.type,className:h()(m.a.editorValue)},d.a.createElement("div",{className:m.a.toolbar},d.a.createElement("dl",null,d.a.createElement("dt",null,y["a"].get("editor.toolbar.size.title"),":"),d.a.createElement("dd",null,e.data.size||0," ",y["a"].get("editor.toolbar.size.unit"))),("list"==n.type||"set"==n.type)&&d.a.createElement("dl",null,d.a.createElement("dt",null,y["a"].get("editor.toolbar.length.title"),":"),d.a.createElement("dd",null,(null===(a=n.children)||void 0===a?void 0:a.length)||0," ",y["a"].get("editor.toolbar.length.unit"))),d.a.createElement("p",null),d.a.createElement("div",{className:m.a.operate},d.a.createElement("button",{type:"button",className:"clipboard-copy tooltipped tooltipped-n","aria-label":y["a"].get("editor.toolbar.button.copy"),"data-clipboard-action":"copy","data-clipboard-target":"#editor-value"},d.a.createElement(v["a"],{type:"icon-copy"})),d.a.createElement("button",{type:"button",className:"tooltipped tooltipped-n","aria-label":y["a"].get("editor.toolbar.button.export"),onClick:e=>D(e.currentTarget,n)},d.a.createElement(v["a"],{type:"icon-export"}))),d.a.createElement("div",{className:m.a.operate,"aria-hidden":"hash"==(null===n||void 0===n?void 0:n.type)||"zset"==n.type},d.a.createElement("button",{type:"button",className:"tooltipped tooltipped-n","aria-label":y["a"].get("editor.toolbar.button.delete-row"),"aria-hidden":!("list"==(null===n||void 0===n?void 0:n.type)||"set"==n.type),onClick:t=>F(e,t.currentTarget)},d.a.createElement(v["a"],{type:"icon-delete"})),d.a.createElement("button",{type:"button",className:"tooltipped tooltipped-n","aria-label":y["a"].get("editor.toolbar.button.save"),"aria-hidden":"hash"==(null===n||void 0===n?void 0:n.type)||"zset"==n.type,onClick:t=>U(e,t.currentTarget)},d.a.createElement(v["a"],{type:"icon-save"}))),d.a.createElement("select",{key:l,onChange:e=>L(e.currentTarget,n.content),defaultValue:l},w.map(((e,t)=>d.a.createElement("option",{key:e,value:t,defaultChecked:t===l},e))))),d.a.createElement("textarea",{key:r+n.full,id:"editor-value",name:"editor-value",defaultValue:r}))),d.a.createElement(N["a"],{id:"setting-key-ttl",title:y["a"].get("editor.toolbar.ttl.title"),visible:!1,className:m.a.dialogEditorTTL},d.a.createElement("div",null,d.a.createElement("select",{id:"setting-key-ttl-unit",defaultValue:1},y["a"].get("editor.toolbar.ttl.unit").map(((e,t)=>d.a.createElement("option",{key:t,value:t},e)))),d.a.createElement(k,{icon:"icon-save",defaultValue:n.ttl,placeholder:y["a"].get("editor.toolbar.ttl.placeholder"),onClick:(t,a)=>q(e,t,a)}))))},W=B,R=a("Blkw"),M=a.n(R),P=a("oNJW"),Y=0,K=null;t["default"]=()=>{var e=Object(c["j"])(),t=Object(P["a"])(),a=Object(c["l"])(),r=a.id,u=a.db,m=a.name,v=Object(o["useState"])("end"),p=Object(l["a"])(v,2),h=p[0],g=p[1],b=Object(o["useState"])({name:m,full:m,type:"",count:0,children:[],ttl:-1}),f=Object(l["a"])(b,2),E=f[0],S=f[1],N=0,O=window.selectKeyType||"none",k=e=>{N=e,window.clearInterval(Y),Y=window.setInterval((()=>{if(N<1)window.clearInterval(Y);else{var e=document.querySelector("#info_ttl i");e&&(e.innerHTML=(--N).toString())}}),1e3)},I=e=>{K=s["a"].values(O,m),K&&(K.on("info",(e=>{E.ttl=e.ttl,E.type=e.type||O,E.name=e.name,E.full=e.full,E.size=e.size,E.children=[],E.itemIndex=void 0,E.content="",E.field="",S(Object(n["a"])({},E)),e.ttl>0&&k(e.ttl)})),K.on("close",(t=>{g("end"),e&&(e.disabled=!1,e.role="")})),K.on("message",(e=>{var t;"string"===E.type?E.content=e:null===(t=E.children)||void 0===t||t.push(...e);S(Object(n["a"])({},E))})))},C=e=>{e.disabled=!0,e.role="icon-refresh",I(e)},x=(e,t)=>{t.disabled=!0,s["a"].expire(m,e).then((t=>{t.isSuccess()&&(E.ttl=e,S(Object(n["a"])({},E)),k(parseInt(e.toString())))})).finally((()=>{t.disabled=!1}))},T=(t,a)=>{a.disabled=!0,s["a"].delete(t).then((t=>{t.isSuccess()&&(M.a.emit("eventDelete",r,u,E.full),toast(y["a"].get("editor.delete.success")),e.push("/"))})).finally((()=>{a.disabled=!1}))},w=e=>{var t,a=null;void 0!=E.itemIndex&&(e.disabled=!0,"list"===E.type&&(a=s["a"].list.del(m,E.itemIndex)),"hash"===E.type&&E.field&&(a=s["a"].hash.del(m,E.field)),"zset"===E.type&&E.field&&(a=s["a"].zset.del(m,E.field)),"set"===E.type&&(a=s["a"].sset.del(m,E.content)),null===(t=a)||void 0===t||t.finally((()=>{var t;null===(t=E.children)||void 0===t||t.splice(E.itemIndex||0,1),E.field=void 0,E.content=void 0,E.itemIndex=void 0,S(Object(n["a"])({},E)),e.disabled=!1})))},L=(e,t,a)=>{var l;a.disabled=!0;var r=null;if("hash"===E.type){if(!e)return void toast(y["a"].get("editor.save.hash.tip"));r=s["a"].hash.set(m,e,t,e===E.field?void 0:E.field).then((a=>{var n;void 0==E.itemIndex?(null===(n=E.children)||void 0===n||n.push({field:e,value:t}),E.field="",E.content=""):(E.children[E.itemIndex].field=e,E.children[E.itemIndex].value=t)}))}if("zset"===E.type){if(!e||!t)return void toast(y["a"].get("editor.save.zset.tip"));r=void 0==E.itemIndex?s["a"].zset.add(m,e,t).then((a=>{var n;null===(n=E.children)||void 0===n||n.push({value:e,score:t}),E.field="",E.content=""})):s["a"].zset.set(m,e,t,e===E.field?void 0:E.field).then((a=>{E.children[E.itemIndex].value=e,E.children[E.itemIndex].score=t}))}null===(l=r)||void 0===l||l.finally((()=>{if("zset"===E.type&&E.children){var e=E.children.sort(((e,t)=>t.score-e.score));E.children=[...e]}S(Object(n["a"])({},E)),a.disabled=!1}))},_=(e,t)=>{var a;t.disabled=!0;var l=null;"string"===E.type&&(l=s["a"].string.set(m,e).then((t=>{E.content=isJSON(e)?JSON.parse(e):e}))),"list"===E.type&&(l=void 0==E.itemIndex?s["a"].list.lPush(m,e).then((t=>{E.children.unshift(isJSON(e)?JSON.parse(e):e),E.content=""})):s["a"].list.set(m,e,E.itemIndex).then((t=>{E.children[E.itemIndex]=isJSON(e)?JSON.parse(e):e,E.content=isJSON(e)?JSON.parse(e):e}))),"set"===E.type&&(l=void 0==E.itemIndex?s["a"].sset.add(m,e).then((t=>{var a;E.content="",null===(a=E.children)||void 0===a||a.push(isJSON(e)?JSON.parse(e):e)})):s["a"].sset.set(m,e,E.content).then((t=>{E.children[E.itemIndex]=e,E.content=isJSON(e)?JSON.parse(e):e}))),null===(a=l)||void 0===a||a.finally((()=>{E.size=e.length,S(Object(n["a"])({},E)),t.disabled=!1}))},j=(t,a,n)=>{n.disabled=!0,s["a"].rename(t,a).then((n=>{n.isSuccess()&&(E.full=a,M.a.emit("eventUpdate",r,u,t,E),e.push("/info/".concat(r,"/").concat(u,"/").concat(E.type,"/").concat(a)))})).finally((()=>{n.disabled=!1}))},F=(e,t)=>{e?("hash"==E.type&&(E.field=e.field,E.size=e.value.toString().length,E.content=isJSON(e.value)?JSON.parse(e.value):e.value),"list"!=E.type&&"set"!=E.type||(E.size=e.length,E.content=isJSON(e)?JSON.parse(e):e),"zset"==E.type&&(E.field=e.value,E.content=e.score,E.size=e.score.toString().length)):(E.field=void 0,E.content=""),E.itemIndex=t,S(Object(n["a"])({},E))};return Object(o["useEffect"])((()=>(window.selectServerId||(window.selectServerId=r),window.selectDatabase||(window.selectDatabase=u),window.clearInterval(Y),g("start"),"none"==O?s["a"].type(m).then((e=>{window.selectKeyType=O=e.data,I()})):I(),()=>{var e;return null===(e=K)||void 0===e?void 0:e.close()})),[r,u,m]),d.a.createElement("div",{className:i.a.keyWrap,lang:t.lang},d.a.createElement(W,{data:E,state:h,handleDeleteItem:w,handleSelectedItem:F,handleSaveTtl:x,handleDelete:T,handleSaveValue:_,handleSaveItem:L,handleRenameSave:j,handleReloadValue:C}))}}}]);